<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Muhammad Shourov - My Writings (Blog)</title>
    <meta name="description" content="Personal blog and literary treasures of Muhammad Shourov (Vampire). Stories, poems, and thoughts.">
    <meta name="keywords" content="Muhammad Shourov, Vampire, Blog, Writing, অতৃপ্ত, উড়ো চিঠি, Literary, লেখালেখি">

    <script data-goatcounter="https://muhammadshourov.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body class="lang-bn"> <header class="header-nav">
        <img src="vampire.jpg" alt="Muhammad Shourov" class="profile-pic">
        <h1>Muhammad Shourov (Vampire)</h1>
        <p>"I love to write" (Writer) ✍️</p>
        
        <nav>
            <a href="index.html">Home</a>
            <a href="services.html">Services</a>
            <a href="utils.html">Tools</a>
            <a href="writeups.html">Write-ups</a>
            <a href="blog.html" class="active">My Writings</a>
        </nav>
    </header>

    <main class="container">
        
        <section class="card stagger" style="--order: 1">
            <h2>Vampire’s Literary Treasures</h2>
            <p>I love to read, write, and tell stories. My literary works are loaded directly from my GitHub Issues.</p>
            
            <div id="blog-container">
                <div id="blog-loader">Loading posts...</div>
            </div>
        </section>

    </main>

    <footer>
        <p>&copy; 2025 - All Rights Reserved by Muhammad Shourov (Vampire).</p>
    </footer>

    <a href="#" class="back-to-top">▲</a>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- GitHub Issues as CMS ---
            const blogContainer = document.getElementById('blog-container');
            const loader = document.getElementById('blog-loader');
            const username = 'vampiresquad';
            const repo = 'Muhammad_Shourov';
            const label = 'blog'; // 'blog' লেবেল

            // Markdown কনভার্টার চালু করা
            const converter = new showdown.Converter();

            async function fetchBlogPosts() {
                try {
                    const response = await fetch(`https://api.github.com/repos/${username}/${repo}/issues?labels=${label}&state=open&sort=created&direction=desc`);
                    if (!response.ok) throw new Error(`GitHub API Error: ${response.status}`);
                    
                    const issues = await response.json();

                    if(loader) loader.style.display = 'none';

                    if (issues.length === 0) {
                        blogContainer.innerHTML = '<p>No posts found. Please create a new GitHub Issue with the `blog` label.</p>';
                        return;
                    }

                    issues.forEach(issue => {
                        const postHTML = converter.makeHtml(issue.body);
                        // তারিখ ইংরেজিতে
                        const postDate = new Date(issue.created_at).toLocaleDateString('en-US', {
                            year: 'numeric', month: 'long', day: 'numeric'
                        });

                        const blogPostCard = `
                            <article class="card blog-post" style="opacity:1; transform:none; animation:none;">
                                <h3>${issue.title}</h3>
                                <p class="meta">Posted on: ${postDate}</p>
                                <div class="blog-post-content">
                                    ${postHTML}
                                </div>
                                <a href="${issue.html_url}" target="_blank" class="btn" style="background: #333; color: white; margin-top: 1rem;">
                                    Comment or View on GitHub
                                </a>
                            </article>
                        `;
                        blogContainer.innerHTML += blogPostCard;
                    });

                } catch (error) {
                    console.error('Error fetching blog posts:', error);
                    if(loader) loader.innerText = 'Failed to load posts.';
                }
            }

            fetchBlogPosts();

            // --- Back to Top বাটন JS ---
            const backToTopButton = document.querySelector('.back-to-top');
            if(backToTopButton) {
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 300) {
                        backToTopButton.classList.add('show');
                    } else {
                        backToTopButton.classList.remove('show');
                    }
                });
            }
        });
    </script>

</body>
</html>
